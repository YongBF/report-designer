# ğŸš€ å¿«é€Ÿå¼€å§‹æŒ‡å—

## ä¸€ã€å¯åŠ¨æœåŠ¡å™¨

### æ–¹æ³•1ï¼šä½¿ç”¨å¯åŠ¨è„šæœ¬ï¼ˆæ¨èï¼‰

**Linux/Mac**ï¼š
```bash
cd mock-server
./start.sh
```

**Windows**ï¼š
```bash
cd mock-server
start.bat
```

### æ–¹æ³•2ï¼šæ‰‹åŠ¨å¯åŠ¨

```bash
cd mock-server
npm install
npm start
```

æœåŠ¡å™¨å¯åŠ¨æˆåŠŸåï¼Œä½ ä¼šçœ‹åˆ°ï¼š

```
=================================
ğŸš€ Mock Server å·²å¯åŠ¨
ğŸ“ åœ°å€: http://localhost:3001
ğŸ”§ ç®¡ç†ç•Œé¢: http://localhost:3001/index.html
=================================

å¯ç”¨çš„APIæ¥å£:
  GET http://localhost:3001/api/users
  POST http://localhost:3001/api/orders
  POST http://localhost:3001/api/sales
  GET http://localhost:3001/api/user-distribution
  GET http://localhost:3001/api/cpu
  ...
```

## äºŒã€åœ¨Report Designerä¸­ä½¿ç”¨

### æ­¥éª¤1ï¼šå¯åŠ¨ä¸¤ä¸ªæœåŠ¡

**ç»ˆç«¯1 - å¯åŠ¨Mock Server**ï¼š
```bash
cd mock-server
npm start
```

**ç»ˆç«¯2 - å¯åŠ¨Report Designer**ï¼š
```bash
cd report-designer
npm run dev
```

### æ­¥éª¤2ï¼šé…ç½®è¡¨æ ¼ç»„ä»¶

1. åœ¨Report Designerä¸­åˆ›å»ºä¸€ä¸ª**è¡¨æ ¼ç»„ä»¶**
2. é€‰ä¸­è¡¨æ ¼ç»„ä»¶ï¼Œåœ¨å³ä¾§å±æ€§é¢æ¿æ‰¾åˆ°"æ•°æ®æºé…ç½®"
3. æ•°æ®æºç±»å‹é€‰æ‹©ï¼š**API æ¥å£**
4. API åœ°å€å¡«å†™ï¼š`http://localhost:3001/api/users`
5. è¯·æ±‚æ–¹æ³•é€‰æ‹©ï¼š**GET**
6. ç‚¹å‡»ä¿å­˜

è¡¨æ ¼ä¼šç«‹å³æ˜¾ç¤ºæ•°æ®ï¼

### æ­¥éª¤3ï¼šé…ç½®å›¾è¡¨ç»„ä»¶

1. åˆ›å»ºä¸€ä¸ª**æŸ±çŠ¶å›¾ç»„ä»¶**
2. æ•°æ®æºç±»å‹é€‰æ‹©ï¼š**API æ¥å£**
3. API åœ°å€å¡«å†™ï¼š`http://localhost:3001/api/sales`
4. è¯·æ±‚æ–¹æ³•é€‰æ‹©ï¼š**POST**
5. ç‚¹å‡»ä¿å­˜

### æ­¥éª¤4ï¼šæµ‹è¯•è”åŠ¨åŠŸèƒ½

1. åˆ›å»ºä¸€ä¸ª**è¡¨å•ç»„ä»¶**ï¼Œæ·»åŠ ä¸¤ä¸ªè¾“å…¥ï¼š
   - æ—¥æœŸé€‰æ‹©å™¨ï¼ˆå­—æ®µï¼šstartDateï¼‰
   - æ—¥æœŸé€‰æ‹©å™¨ï¼ˆå­—æ®µï¼šendDateï¼‰
   - æŸ¥è¯¢æŒ‰é’®

2. é€‰ä¸­è¡¨å•ç»„ä»¶ï¼Œåˆ‡æ¢åˆ°"è”åŠ¨é…ç½®"æ ‡ç­¾é¡µ

3. æ·»åŠ è”åŠ¨é…ç½®ï¼š
   - æºç»„ä»¶ï¼šè¡¨å•ç»„ä»¶
   - è§¦å‘äº‹ä»¶ï¼šbutton.clickï¼ˆæŸ¥è¯¢æŒ‰é’®ç‚¹å‡»ï¼‰
   - ç›®æ ‡ç»„ä»¶ï¼šæŸ±çŠ¶å›¾ç»„ä»¶
   - åŠ¨ä½œç±»å‹ï¼šrefresh
   - å‚æ•°æ˜ å°„ï¼š
     - è¡¨å•.startDate â†’ å›¾è¡¨.startDate
     - è¡¨å•.endDate â†’ å›¾è¡¨.endDate

4. ä¿å­˜é…ç½®

5. æµ‹è¯•ï¼š
   - åœ¨è¡¨å•ä¸­é€‰æ‹©æ—¥æœŸèŒƒå›´
   - ç‚¹å‡»æŸ¥è¯¢æŒ‰é’®
   - è§‚å¯ŸæŸ±çŠ¶å›¾æ˜¯å¦è‡ªåŠ¨åˆ·æ–°
   - åœ¨Mock Serverçš„æ§åˆ¶å°æŸ¥çœ‹æ¥æ”¶åˆ°çš„å‚æ•°

## ä¸‰ã€ä½¿ç”¨ç®¡ç†ç•Œé¢

### è®¿é—®ç®¡ç†ç•Œé¢

æ‰“å¼€æµè§ˆå™¨è®¿é—®ï¼š`http://localhost:3001/index.html`

### ä¸»è¦åŠŸèƒ½

#### 1. æŸ¥çœ‹æ‰€æœ‰æ¥å£
- ç»¿è‰²è¾¹æ¡† = å·²å¯ç”¨
- ç°è‰²è¾¹æ¡† = å·²ç¦ç”¨

#### 2. æµ‹è¯•æ¥å£
ç‚¹å‡»"ğŸ§ª æµ‹è¯•"æŒ‰é’®ï¼Œä¼šå¼¹çª—æ˜¾ç¤ºæ¥å£å“åº”æ•°æ®

#### 3. æ·»åŠ æ–°æ¥å£

ç¤ºä¾‹ï¼šåˆ›å»ºä¸€ä¸ª"äº§å“åˆ—è¡¨"æ¥å£

```
æ¥å£åç§°ï¼šäº§å“åˆ—è¡¨
æ¥å£è·¯å¾„ï¼š/api/products
è¯·æ±‚æ–¹æ³•ï¼šGET
å“åº”ç±»å‹ï¼šè¡¨æ ¼æ•°æ®
å“åº”å»¶è¿Ÿï¼š500ms
å“åº”æ•°æ®ï¼š
{
  "columns": ["id", "name", "price", "stock"],
  "rows": [
    {"id": 1, "name": "äº§å“A", "price": 100, "stock": 50},
    {"id": 2, "name": "äº§å“B", "price": 200, "stock": 30}
  ]
}
```

#### 4. å…¨å±€è®¾ç½®

- **å¯ç”¨è¯·æ±‚æ—¥å¿—**ï¼šåœ¨Mock Serveræ§åˆ¶å°æ˜¾ç¤ºæ‰€æœ‰è¯·æ±‚
- **é»˜è®¤å»¶è¿Ÿ**ï¼šæ–°æ¥å£çš„é»˜è®¤å“åº”å»¶è¿Ÿ

## å››ã€è°ƒè¯•æŠ€å·§

### 1. æŸ¥çœ‹è¯·æ±‚æ—¥å¿—

åœ¨Mock Serverçš„æ§åˆ¶å°ï¼Œä½ ä¼šçœ‹åˆ°ï¼š

```
[2024-01-16T10:30:00.000Z] POST /api/sales
  Body: {"startDate":"2024-01-01","endDate":"2024-12-31"}
[Endpoint] é”€å”®æ•°æ®
  Received params: {
    query: {},
    body: { startDate: '2024-01-01', endDate: '2024-12-31' }
  }
```

### 2. æŸ¥çœ‹å‚æ•°å›æ˜¾

æ‰€æœ‰APIå“åº”éƒ½åŒ…å« `params` å­—æ®µï¼Œæ˜¾ç¤ºæ¥æ”¶åˆ°çš„å‚æ•°ï¼š

```json
{
  "success": true,
  "data": { ... },
  "params": {
    "query": {},
    "body": { "startDate": "2024-01-01" }
  }
}
```

### 3. æ¨¡æ‹Ÿç½‘ç»œå»¶è¿Ÿ

åœ¨ç®¡ç†ç•Œé¢ä¸­ï¼Œä¿®æ”¹æ¥å£çš„"å“åº”å»¶è¿Ÿ"ï¼š
- 0ms = ç«‹å³å“åº”
- 500ms = æ­£å¸¸é€Ÿåº¦
- 2000ms = æ…¢é€Ÿç½‘ç»œ

### 4. ç¦ç”¨æ¥å£

ç‚¹å‡»"âŒ ç¦ç”¨"æŒ‰é’®ï¼Œæ¥å£å°†ä¸å†å“åº”ï¼Œç”¨äºæµ‹è¯•é”™è¯¯å¤„ç†

## äº”ã€å¸¸ç”¨æ¥å£ç¤ºä¾‹

### è¡¨æ ¼æ•°æ®æ¥å£

**è¯·æ±‚**ï¼š
```bash
GET http://localhost:3001/api/users
```

**å“åº”**ï¼š
```json
{
  "success": true,
  "data": {
    "columns": ["id", "name", "email"],
    "rows": [
      {"id": 1, "name": "å¼ ä¸‰", "email": "zhangsan@example.com"}
    ]
  }
}
```

### å›¾è¡¨æ•°æ®æ¥å£

**è¯·æ±‚**ï¼š
```bash
POST http://localhost:3001/api/sales
Content-Type: application/json

{"startDate": "2024-01-01"}
```

**å“åº”**ï¼š
```json
{
  "success": true,
  "data": {
    "categories": ["ä¸€æœˆ", "äºŒæœˆ", "ä¸‰æœˆ"],
    "series": [
      {"name": "é”€å”®é¢", "data": [120, 200, 150]}
    ]
  },
  "params": {
    "body": {"startDate": "2024-01-01"}
  }
}
```

## å…­ã€æ•…éšœæ’æŸ¥

### é—®é¢˜1ï¼šæ— æ³•è¿æ¥åˆ°æœåŠ¡å™¨

**æ£€æŸ¥**ï¼š
- âœ… Mock Serveræ˜¯å¦å·²å¯åŠ¨
- âœ… ç«¯å£3001æ˜¯å¦è¢«å ç”¨
- âœ… é˜²ç«å¢™æ˜¯å¦é˜»æ­¢

**è§£å†³**ï¼š
```bash
# æ›´æ¢ç«¯å£
PORT=3002 npm start
```

### é—®é¢˜2ï¼šæ¥å£è¿”å›404

**æ£€æŸ¥**ï¼š
- âœ… æ¥å£è·¯å¾„æ˜¯å¦æ­£ç¡®
- âœ… æ¥å£æ˜¯å¦å·²å¯ç”¨

**è§£å†³**ï¼š
è®¿é—®ç®¡ç†ç•Œé¢ï¼Œæ£€æŸ¥æ¥å£åˆ—è¡¨

### é—®é¢˜3ï¼šè”åŠ¨ä¸ç”Ÿæ•ˆ

**æ£€æŸ¥**ï¼š
- âœ… è”åŠ¨é…ç½®æ˜¯å¦æ­£ç¡®
- âœ… ç›®æ ‡ç»„ä»¶çš„æ•°æ®æºç±»å‹æ˜¯å¦ä¸ºAPI
- âœ… æŸ¥çœ‹Mock Serveræ§åˆ¶å°æ—¥å¿—

**è§£å†³**ï¼š
1. åœ¨è”åŠ¨é…ç½®ä¸­æ£€æŸ¥å‚æ•°æ˜ å°„
2. ç¡®è®¤ç›®æ ‡ç»„ä»¶çš„APIåœ°å€æ­£ç¡®
3. æŸ¥çœ‹Mock Serveræ˜¯å¦æ¥æ”¶åˆ°å‚æ•°

## ä¸ƒã€è¿›é˜¶ä½¿ç”¨

### 1. è‡ªå®šä¹‰æ‹¦æˆªå™¨

åœ¨Report Designerçš„å±æ€§é¢æ¿ä¸­ï¼Œå¯ä»¥ä¸ºAPIé…ç½®è¯·æ±‚æ‹¦æˆªå™¨ï¼š

```javascript
async function intercept(config, linkageParams) {
  // æ·»åŠ token
  config.headers['Authorization'] = 'Bearer xxx';

  // ä¿®æ”¹å‚æ•°
  const body = JSON.parse(config.body);
  body.timestamp = Date.now();
  config.body = JSON.stringify(body);

  return config;
}
```

### 2. åŠ¨æ€æ•°æ®

åˆ›å»ºä¸€ä¸ªè¿”å›éšæœºæ•°æ®çš„æ¥å£ï¼š

```json
{
  "name": "éšæœºæ•°æ®",
  "path": "/api/random",
  "method": "GET",
  "responseType": "chart",
  "data": {
    "categories": ["A", "B", "C"],
    "series": [
      {"name": "æ•°å€¼", "data": [Math.random()*100, Math.random()*100, Math.random()*100]}
    ]
  }
}
```

æ¯æ¬¡è¯·æ±‚éƒ½ä¼šè¿”å›ä¸åŒçš„æ•°æ®ã€‚

### 3. åˆ†é¡µæ•°æ®

æ¨¡æ‹Ÿåˆ†é¡µæ¥å£ï¼š

```json
{
  "name": "åˆ†é¡µæ•°æ®",
  "path": "/api/paged",
  "method": "POST",
  "responseType": "table",
  "data": {
    "total": 100,
    "page": 1,
    "pageSize": 10,
    "columns": ["id", "name"],
    "rows": [...]
  }
}
```

## å…«ã€èµ„æºé“¾æ¥

- ğŸ“– å®Œæ•´æ–‡æ¡£ï¼šæŸ¥çœ‹ `README.md`
- ğŸ¨ Report Designerï¼š`http://localhost:5173`
- ğŸ”§ Mock Serverï¼š`http://localhost:3001`
- ğŸ“Š ç®¡ç†ç•Œé¢ï¼š`http://localhost:3001/index.html`

---

ğŸ’¡ **æç¤º**ï¼šé‡åˆ°é—®é¢˜å…ˆæŸ¥çœ‹æ§åˆ¶å°æ—¥å¿—ï¼Œå¤§å¤šæ•°é—®é¢˜éƒ½èƒ½ä»æ—¥å¿—ä¸­æ‰¾åˆ°ç­”æ¡ˆï¼
